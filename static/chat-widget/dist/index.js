var pe=Object.create;var X=Object.defineProperty;var me=Object.getOwnPropertyDescriptor;var Le=Object.getOwnPropertyNames;var xe=Object.getPrototypeOf,Ie=Object.prototype.hasOwnProperty;var M=(e,a)=>()=>(a||e((a={exports:{}}).exports,a),a.exports);var Ce=(e,a,o,u)=>{if(a&&typeof a=="object"||typeof a=="function")for(let t of Le(a))!Ie.call(e,t)&&t!==o&&X(e,t,{get:()=>a[t],enumerable:!(u=me(a,t))||u.enumerable});return e};var D=(e,a,o)=>(o=e!=null?pe(xe(e)):{},Ce(a||!e||!e.__esModule?X(o,"default",{value:e,enumerable:!0}):o,e));var ue=M(l=>{"use strict";var h=Symbol.for("react.element"),ge=Symbol.for("react.portal"),he=Symbol.for("react.fragment"),Se=Symbol.for("react.strict_mode"),ke=Symbol.for("react.profiler"),we=Symbol.for("react.provider"),ye=Symbol.for("react.context"),Fe=Symbol.for("react.forward_ref"),Ae=Symbol.for("react.suspense"),Pe=Symbol.for("react.memo"),Be=Symbol.for("react.lazy"),J=Symbol.iterator;function Me(e){return e===null||typeof e!="object"?null:(e=J&&e[J]||e["@@iterator"],typeof e=="function"?e:null)}var Z={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},K=Object.assign,Q={};function C(e,a,o){this.props=e,this.context=a,this.refs=Q,this.updater=o||Z}C.prototype.isReactComponent={};C.prototype.setState=function(e,a){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,a,"setState")};C.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Y(){}Y.prototype=C.prototype;function E(e,a,o){this.props=e,this.context=a,this.refs=Q,this.updater=o||Z}var V=E.prototype=new Y;V.constructor=E;K(V,C.prototype);V.isPureReactComponent=!0;var $=Array.isArray,ee=Object.prototype.hasOwnProperty,z={current:null},ae={key:!0,ref:!0,__self:!0,__source:!0};function te(e,a,o){var u,t={},r=null,f=null;if(a!=null)for(u in a.ref!==void 0&&(f=a.ref),a.key!==void 0&&(r=""+a.key),a)ee.call(a,u)&&!ae.hasOwnProperty(u)&&(t[u]=a[u]);var c=arguments.length-2;if(c===1)t.children=o;else if(1<c){for(var s=Array(c),p=0;p<c;p++)s[p]=arguments[p+2];t.children=s}if(e&&e.defaultProps)for(u in c=e.defaultProps,c)t[u]===void 0&&(t[u]=c[u]);return{$$typeof:h,type:e,key:r,ref:f,props:t,_owner:z.current}}function De(e,a){return{$$typeof:h,type:e.type,key:a,ref:e.ref,props:e.props,_owner:e._owner}}function q(e){return typeof e=="object"&&e!==null&&e.$$typeof===h}function be(e){var a={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(o){return a[o]})}var j=/\/+/g;function U(e,a){return typeof e=="object"&&e!==null&&e.key!=null?be(""+e.key):a.toString(36)}function v(e,a,o,u,t){var r=typeof e;(r==="undefined"||r==="boolean")&&(e=null);var f=!1;if(e===null)f=!0;else switch(r){case"string":case"number":f=!0;break;case"object":switch(e.$$typeof){case h:case ge:f=!0}}if(f)return f=e,t=t(f),e=u===""?"."+U(f,0):u,$(t)?(o="",e!=null&&(o=e.replace(j,"$&/")+"/"),v(t,a,o,"",function(p){return p})):t!=null&&(q(t)&&(t=De(t,o+(!t.key||f&&f.key===t.key?"":(""+t.key).replace(j,"$&/")+"/")+e)),a.push(t)),1;if(f=0,u=u===""?".":u+":",$(e))for(var c=0;c<e.length;c++){r=e[c];var s=u+U(r,c);f+=v(r,a,o,s,t)}else if(s=Me(e),typeof s=="function")for(e=s.call(e),c=0;!(r=e.next()).done;)r=r.value,s=u+U(r,c++),f+=v(r,a,o,s,t);else if(r==="object")throw a=String(e),Error("Objects are not valid as a React child (found: "+(a==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":a)+"). If you meant to render a collection of children, use an array instead.");return f}function b(e,a,o){if(e==null)return e;var u=[],t=0;return v(e,u,"","",function(r){return a.call(o,r,t++)}),u}function ve(e){if(e._status===-1){var a=e._result;a=a(),a.then(function(o){(e._status===0||e._status===-1)&&(e._status=1,e._result=o)},function(o){(e._status===0||e._status===-1)&&(e._status=2,e._result=o)}),e._status===-1&&(e._status=0,e._result=a)}if(e._status===1)return e._result.default;throw e._result}var m={current:null},R={transition:null},Re={ReactCurrentDispatcher:m,ReactCurrentBatchConfig:R,ReactCurrentOwner:z};function oe(){throw Error("act(...) is not supported in production builds of React.")}l.Children={map:b,forEach:function(e,a,o){b(e,function(){a.apply(this,arguments)},o)},count:function(e){var a=0;return b(e,function(){a++}),a},toArray:function(e){return b(e,function(a){return a})||[]},only:function(e){if(!q(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};l.Component=C;l.Fragment=he;l.Profiler=ke;l.PureComponent=E;l.StrictMode=Se;l.Suspense=Ae;l.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Re;l.act=oe;l.cloneElement=function(e,a,o){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var u=K({},e.props),t=e.key,r=e.ref,f=e._owner;if(a!=null){if(a.ref!==void 0&&(r=a.ref,f=z.current),a.key!==void 0&&(t=""+a.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(s in a)ee.call(a,s)&&!ae.hasOwnProperty(s)&&(u[s]=a[s]===void 0&&c!==void 0?c[s]:a[s])}var s=arguments.length-2;if(s===1)u.children=o;else if(1<s){c=Array(s);for(var p=0;p<s;p++)c[p]=arguments[p+2];u.children=c}return{$$typeof:h,type:e.type,key:t,ref:r,props:u,_owner:f}};l.createContext=function(e){return e={$$typeof:ye,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:we,_context:e},e.Consumer=e};l.createElement=te;l.createFactory=function(e){var a=te.bind(null,e);return a.type=e,a};l.createRef=function(){return{current:null}};l.forwardRef=function(e){return{$$typeof:Fe,render:e}};l.isValidElement=q;l.lazy=function(e){return{$$typeof:Be,_payload:{_status:-1,_result:e},_init:ve}};l.memo=function(e,a){return{$$typeof:Pe,type:e,compare:a===void 0?null:a}};l.startTransition=function(e){var a=R.transition;R.transition={};try{e()}finally{R.transition=a}};l.unstable_act=oe;l.useCallback=function(e,a){return m.current.useCallback(e,a)};l.useContext=function(e){return m.current.useContext(e)};l.useDebugValue=function(){};l.useDeferredValue=function(e){return m.current.useDeferredValue(e)};l.useEffect=function(e,a){return m.current.useEffect(e,a)};l.useId=function(){return m.current.useId()};l.useImperativeHandle=function(e,a,o){return m.current.useImperativeHandle(e,a,o)};l.useInsertionEffect=function(e,a){return m.current.useInsertionEffect(e,a)};l.useLayoutEffect=function(e,a){return m.current.useLayoutEffect(e,a)};l.useMemo=function(e,a){return m.current.useMemo(e,a)};l.useReducer=function(e,a,o){return m.current.useReducer(e,a,o)};l.useRef=function(e){return m.current.useRef(e)};l.useState=function(e){return m.current.useState(e)};l.useSyncExternalStore=function(e,a,o){return m.current.useSyncExternalStore(e,a,o)};l.useTransition=function(){return m.current.useTransition()};l.version="18.3.1"});var T=M((Ne,le)=>{"use strict";le.exports=ue()});var re=M(O=>{"use strict";var Oe=T(),He=Symbol.for("react.element"),Ue=Symbol.for("react.fragment"),Ee=Object.prototype.hasOwnProperty,Ve=Oe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ze={key:!0,ref:!0,__self:!0,__source:!0};function fe(e,a,o){var u,t={},r=null,f=null;o!==void 0&&(r=""+o),a.key!==void 0&&(r=""+a.key),a.ref!==void 0&&(f=a.ref);for(u in a)Ee.call(a,u)&&!ze.hasOwnProperty(u)&&(t[u]=a[u]);if(e&&e.defaultProps)for(u in a=e.defaultProps,a)t[u]===void 0&&(t[u]=a[u]);return{$$typeof:He,type:e,key:r,ref:f,props:t,_owner:Ve.current}}O.Fragment=Ue;O.jsx=fe;O.jsxs=fe});var W=M((Ca,se)=>{"use strict";se.exports=re()});var x=D(T());var S=D(T());var de={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};var Te=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),L=(e,a)=>{let o=(0,S.forwardRef)(({color:u="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:f,children:c,...s},p)=>(0,S.createElement)("svg",{ref:p,...de,width:t,height:t,stroke:u,strokeWidth:f?Number(r)*24/Number(t):r,className:`lucide lucide-${Te(e)}`,...s},[...a.map(([H,B])=>(0,S.createElement)(H,B)),...(Array.isArray(c)?c:[c])||[]]));return o.displayName=`${e}`,o};var k=L("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);var w=L("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);var g=L("MessageCircle",[["path",{d:"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z",key:"v2veuj"}]]);var y=L("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);var F=L("Send",[["line",{x1:"22",x2:"11",y1:"2",y2:"13",key:"2qtwb"}],["polygon",{points:"22 2 15 22 11 13 2 9 22 2",key:"12uapv"}]]);var A=L("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);var P=L("X",[["line",{x1:"18",x2:"6",y1:"6",y2:"18",key:"15jfxm"}],["line",{x1:"6",x2:"18",y1:"6",y2:"18",key:"d1lma3"}]]);var n={background:"#1A2332",text:"#E9E9E9",accent:"#00D4B8",secondary:"#2A3441",border:"#3A3F51"};var d=D(W()),qe=({isOpen:e,onClose:a})=>{let[o,u]=(0,x.useState)([]),[t,r]=(0,x.useState)(""),[f,c]=(0,x.useState)(!1),[s,p]=(0,x.useState)("An\xF3nimo"),[H,B]=(0,x.useState)(!1),G=(0,x.useRef)(null),N=(0,x.useRef)(null),ie=()=>{G.current?.scrollIntoView({behavior:"smooth"})};(0,x.useEffect)(()=>{let i=window.currentUser;i&&i.name?p(i.name):p(localStorage.getItem("displayName")||"An\xF3nimo"),fetch("/api/messages").then(I=>I.json()).then(I=>u(I))},[]),(0,x.useEffect)(()=>{e&&!f&&(ie(),N.current?.focus())},[e,f,o]),(0,x.useEffect)(()=>{let i=I=>{I.key==="Escape"&&e&&a()};return document.addEventListener("keydown",i),()=>document.removeEventListener("keydown",i)},[e,a]);let _=()=>{t.trim()&&(fetch("/api/messages",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:s,text:t})}).then(i=>i.json()).then(i=>{u(I=>[...I,i])}),r(""))},ce=i=>{i.key==="Enter"&&!i.shiftKey&&(i.preventDefault(),_())},ne=i=>new Date(i).toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"});return e?(0,d.jsxs)("div",{className:"chat-modal-overlay chat-overlay",style:{position:"fixed",bottom:"1rem",right:"1rem",width:"20rem",borderRadius:"0.5rem",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",backgroundColor:n.background,color:n.text,border:`2px solid ${n.border}`,zIndex:1000,display:"flex",flexDirection:"column"},children:[(0,d.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.75rem",borderBottom:`2px solid ${n.border}`,backgroundColor:n.secondary,borderTopLeftRadius:"0.5rem",borderTopRightRadius:"0.5rem"},children:[(0,d.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[(0,d.jsx)(g,{size:18,color:n.accent}),(0,d.jsx)("span",{style:{fontWeight:600},children:"CHAT GLOBAL EEVI"})]}),(0,d.jsxs)("div",{style:{display:"flex",gap:"0.5rem"},children:[(0,d.jsx)("button",{onClick:()=>c(!f),style:{background:"none",border:"none",cursor:"pointer"},children:f?(0,d.jsx)(w,{size:16}):(0,d.jsx)(y,{size:16})}),(0,d.jsx)("button",{onClick:a,style:{background:"none",border:"none",cursor:"pointer"},children:(0,d.jsx)(P,{size:16,color:n.text})})]})]}),!f&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("div",{style:{flex:1,overflowY:"auto",padding:"0.75rem"},children:[o.map(i=>(0,d.jsxs)("div",{style:{marginBottom:"0.5rem"},children:[(0,d.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem",fontSize:"0.75rem"},children:[(0,d.jsx)(A,{size:12,color:i.isSystem?n.accent:n.text}),(0,d.jsx)("span",{style:{fontWeight:600},children:i.sender}),(0,d.jsx)(k,{size:10,color:"#888"}),(0,d.jsx)("span",{style:{color:"#888"},children:ne(i.timestamp)})]}),(0,d.jsx)("div",{style:{marginLeft:i.sender===s?"1rem":0,padding:"0.5rem",borderLeft:`4px solid ${i.isSystem?n.accent:n.border}`,backgroundColor:i.isSystem?n.secondary:n.border,borderRadius:"0.25rem",color:n.text,fontSize:"0.875rem"},children:i.text})]},i.id)),(0,d.jsx)("div",{ref:G})]}),(0,d.jsxs)("div",{style:{borderTop:`2px solid ${n.border}`,padding:"0.75rem",display:"flex",flexDirection:"column"},children:[(0,d.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[(0,d.jsx)("span",{style:{fontSize:"0.75rem",color:n.accent},children:"Conectado como:"}),H?(0,d.jsx)("input",{value:s,onChange:i=>p(i.target.value),onBlur:()=>{B(!1),localStorage.setItem("displayName",s)},style:{fontSize:"0.75rem"}}):(0,d.jsx)("span",{style:{fontSize:"0.75rem",fontWeight:600,cursor:window.currentUser?"default":"pointer"},onClick:()=>{window.currentUser||B(!0)},children:s})]}),(0,d.jsxs)("div",{style:{display:"flex",gap:"0.5rem"},children:[(0,d.jsx)("input",{ref:N,type:"text",value:t,onChange:i=>r(i.target.value),onKeyPress:ce,placeholder:"Escribe tu mensaje...",style:{flex:1,padding:"0.5rem",borderRadius:"0.25rem",border:`2px solid ${n.border}`,backgroundColor:n.background,color:n.text,fontSize:"0.875rem"}}),(0,d.jsx)("button",{onClick:_,disabled:!t.trim(),style:{padding:"0.5rem 1rem",borderRadius:"0.25rem",border:`2px solid ${n.accent}`,backgroundColor:n.accent,color:n.background,cursor:t.trim()?"pointer":"not-allowed"},children:(0,d.jsx)(F,{size:16})})]})]})]}),f&&(0,d.jsxs)("div",{style:{padding:"1rem",textAlign:"center"},children:[(0,d.jsx)(g,{size:20,color:n.accent}),(0,d.jsx)("div",{style:{color:n.text},children:"Chat minimizado"})]})]}):null},wa=qe;export{wa as default};
/*! Bundled license information:

react/cjs/react.production.min.js:
  (**
   * @license React
   * react.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

react/cjs/react-jsx-runtime.production.min.js:
  (**
   * @license React
   * react-jsx-runtime.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)
*/
