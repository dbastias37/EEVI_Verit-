{% extends 'base.html' %}

{% block title %}{{ topic.title if topic else 'Tema no encontrado' }}{% endblock %}

{% block content %}
  {% if topic %}
  <div class="forum-topic-container">
    <button onclick="window.location.href='{{ url_for('forum_index') }}'" class="back-btn">← Volver al foro</button>
    <h1 class="topic-title">{{ topic.title }}</h1>
    <p class="topic-meta">Categoría: {{ topic.category }} • {{ topic.created_at.strftime('%d %b %Y, %H:%M') }}</p>
    <div class="topic-body">{{ topic.description }}</div>
    <hr/>
    <h2 class="responses-title">Respuestas</h2>
    {% for r in responses %}
    <div class="response-card">
      <p class="content">{{ r[1] }}</p>
      <p class="meta">{{ r[2] }}</p>
    </div>
    {% else %}
    <p class="no-resp">No hay respuestas aún. Sé el primero en responder:</p>
    {% endfor %}
    <form action="{{ url_for('forum_topic_view', topic_id=topic.id) }}" method="post">
      <textarea name="response" required placeholder="Tu respuesta…"></textarea>
      <button type="submit">Responder</button>
    </form>
  </div>
  {% else %}
  <div class="alert alert-warning">
    No encontramos ese tema. <a href="{{ url_for('forum_index') }}">Volver al foro</a>
  </div>
  {% endif %}
{% endblock %}
