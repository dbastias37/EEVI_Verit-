{% extends 'base.html' %}

{% block title %}{{ topic.title if topic else 'Tema no encontrado' }}{% endblock %}

{% block content %}
  {% if topic %}
  <div class="forum-topic-container">
    <button onclick="window.location.href='{{ url_for('forum_index') }}'" class="back-btn">← Volver al foro</button>
    <h1 class="topic-title">{{ topic.title }}</h1>
    <p class="topic-meta">Categoría: {{ topic.category }} • {{ topic.created_at.strftime('%d %b %Y, %H:%M') }}</p>
    <div class="topic-body">{{ topic.description }}</div>
    <hr/>
    <h2 class="responses-title">Respuestas</h2>
    {% for r in responses %}
      <div class="response-card">
        <p class="response-body">{{ r.content or r.body }}</p>
        <p class="response-meta">por {{ r.author }} • {{ r.created_at.strftime('%d %b %Y, %H:%M') }}</p>
      </div>
    {% else %}
      <p class="no-resp">Sé el primero en responder este tema.</p>
    {% endfor %}
    <form class="reply-form" action="{{ url_for('forum_reply', topic_id=topic.id) }}" method="post">
      <label for="content">Respuesta</label>
      <textarea id="content" name="content" required></textarea>
      <button type="submit" class="reply-btn">Enviar respuesta</button>
    </form>
  </div>
  {% else %}
  <div class="alert alert-warning">
    No encontramos ese tema. <a href="{{ url_for('forum_index') }}">Volver al foro</a>
  </div>
  {% endif %}
{% endblock %}
