{% extends 'base.html' %}

{% block title %}Packs{% endblock %}

{% block content %}
  <h1>Packs</h1>
  {% if not previews %}
  <div>AÃºn no hay previews disponibles. Sube tus archivos *_preview.mp3 al folder EEVI-Previews en Google Drive.</div>
  {% else %}
    {% for p in previews %}
    <h2>{{ p.name }}</h2>
    <div id="wave-{{ loop.index }}"></div>
    <button onclick="players['{{ loop.index }}'].playPause()">Play/Pause</button>
    {% endfor %}
  {% endif %}
{% endblock %}

{% block scripts %}
  {{ super() }}
  <script>
    window.players = {};
    {% for p in previews %}
    players['{{ loop.index }}'] = WaveSurfer.create({
      container: '#wave-{{ loop.index }}',
      waveColor: '#999',
      progressColor: '#333',
      height: 80
    });
    players['{{ loop.index }}'].load('{{ p.url }}');
    {% endfor %}
  </script>
{% endblock %}
